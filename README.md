<H1 align="center"> How to Explore APIs üéØ </H1>
The idea of this repository is to assist in studies and ways of exploring the API environment.

Before we start with the API exploration phase, it is necessary to have a knowledge base, so I followed in my line of thought, some steps that we should follow to strengthen this base.

<H2 align="center"> Level One {Start} :books: </H2>
The idea here is to spend as much time as you can sharpening the axe, so that the blow is accurate.
It's no use having the best tools in our favor, if we don't have a base, it's necessary to understand how HTTP methods work, error messages, what types of APIs are and how each one of them works.

<H3 align="center"> Links to Study Articles: üìò</H3>

<table border="1" align="center">    
  <tr>
    <td align="center">Name</td>
    <td align="center">Description</td>
  </tr>
   <tr>
    <td align="center"><a href="https://portswigger.net/blog/hack-your-apis-interview-with-corey-ball-api-security-expert">Hack You APIs</a></td>
    <td align="center">Hack your APIs: interview with Corey Ball - API security expert</td>  
   </tr>    
   <tr>
    <td align="center"><a href="https://rhinosecuritylabs.com/application-security/simplifying-api-pentesting-swagger-files">Simplifying API Pentesting</a></td>
    <td align="center">Simplifying API Pentesting With Swagger Files - David Yesland</td>  
   </tr>    
   <tr>
    <td align="center"><a href="https://medium.com/@ghostlulzhacks/swagger-api-c07eca05441e">Swagger API</a></td>
    <td align="center">Swagger API - Medium (ghostlulz)</td>  
   </tr>    
   <tr>
    <td align="center"><a href="https://book.hacktricks.xyz/pentesting/pentesting-web/web-api-pentesting">WEB API Pentesting</a></td>
    <td align="center">Book Hacktricks</td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://pentestbook.six2dez.com/enumeration/webservices/apis">API Pentesting</a></td>
    <td align="center">Book Pentest API</td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://blog.securelayer7.net/api-penetration-testing-with-owasp-2017-test-cases/">API Pentest Owasp 2017</a></td>
    <td align="center">Pentest APIs with OWASP 2017 Test Cases</td>  
   </tr> 
   <tr>
    <td align="center"><a href="https://securityboulevard.com/2021/01/manual-penetration-testing-leaves-apis-exposed">Manual Pentesting APIs</a></td>
    <td align="center">Manual penetration testing leaves apis exposed</td>  
   </tr> 
 </table>    


https://www.danielyan.com/penetration-testing<br>
https://workbook.securityboat.in/resources/api-pentest<br>
https://graphql.org/learn/queries/<br>
https://apisecurity.io/encyclopedia/content/owasp/owasp-api-security-top-10.htm<br>
https://labs.detectify.com/2021/08/10/how-to-hack-apis-in-2021/<br>
https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md#parameter-object<br>
https://assertible.com/blog/7-http-methods-every-web-developer-should-know-and-how-to-test-them<br>


<H3 align="center"> Links to videos/classes for study: üìΩÔ∏è </H3>

<table border="1">    
     
  <tr>
    <td align="center">Name</td>
    <td align="center">Description</td>
  </tr>
  <tr>
   <td><a href="https://www.youtube.com/watch?v=fvcKwUS4PTE ">Recon APIs</a></td>
    <td>This week we cover how to do API enumeration/API Recon. I show you how to find new API endpoints using tools like Burp Intruder and Ffuf, as well as how to find hidden parameters using Arjun. Including how to act on this data and use it to find bugs!</td>
  </tr>
  <tr>
    <td><a href="https://www.youtube.com/watch?v=aQGbYfalRTA"> Owasp Top 10 API Bugs </a></td>
    <td>In this video I go over the Top 10 API Bugs published by the OWASP API Security project. Although published for the blue team/security teams there's some great info for bug bounty hunters! So let's break it down, what are the bugs, where can we find them and how do we exploit them.</td>
  </tr>
  <tr>
    <td><a href="https://www.youtube.com/watch?v=AsGSCWCraS8"> Explore Method PUT </a></td>
    <td>PUT method was initially expected as one of the HTTP method used for file management operations. If the HTTP PUT method is enabled on the webserver it tends to be utilized to upload a malicious resource to the target server, for example web shell, and execute it.</td>
  </tr>
  <tr>
    <td><a href="https://youtu.be/jyjGneKJynk"> Finding Your Next Bug: GraphQL </a></td>
    <td>GraphQL is becoming the next big API technology for developers, but with new technology comes new risk, and for us that means bounties! In this video, I cover everything GraphQL, from how it works to what kind of bugs are common.</td>
  </tr>
 </table> 

<H3 align="center"> Links to HTTP Status Code and Methods: </H3>

<table border="1" align="center">    
  <tr>
    <td align="center">Link</td>
    <td align="center">Description</td>
  </tr>
   <tr>
    <td align="center"><a href="https://www.devmedia.com.br/http-status-code/41222#3-9">Link</a></td>
    <td align="center">Hack your APIs: interview with Corey Ball - API security expert</td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://assertible.com/blog/7-http-methods-every-web-developer-should-know-and-how-to-test-them">Link</a></td>
    <td align="center">7 HTTP Methods every web developer should know and how to test them</td>  
   </tr> 
   <tr>
    <td align="center"><a href="https://betterprogramming.pub/9-http-methods-you-want-to-know-88e45a28d106">Link</a></td>
    <td align="center">9 HTTP Methods you want to know</td>  
   </tr> 
  </table>

<H3 align="center"> Laboratory Links for Studies: üíª </H3>

<table border="1" align="center">    
  <tr>
    <td align="center">Link</td>
    <td align="center">Description</td>
  </tr>
   <tr>
    <td align="center"><a href="https://github.com/InsiderPhD/Generic-University">Link</a></td>
    <td align="center"> Generic University - Lab OWASP Top 10 API</td>  
   </tr>  
   <tr>
    <td align="center"><a href="">Link</a></td>
    <td align="center"> Aplication Security - Lab OWASP Top 10 API </td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://github.com/dolevf/Damn-Vulnerable-GraphQL-Application">Link</a></td>
    <td align="center">Lab API GraphQL (Github)</td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://github.com/CarveSystems/vulnerable-graphql-api">Link</a></td>
    <td align="center">Lab API GraphQL Vuln (Github)</td>  
   </tr>  
   <tr>
    <td align="center"><a href="">Link</a></td>
    <td align="center"> </td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://github.com/h-a-c/jwt-lab">Link</a></td>
    <td align="center">LAB JSON Web Token (Github)</td>  
   </tr>  
   <tr>
    <td align="center"><a href="https://github.com/roottusk/vapi">Link</a></td>
    <td align="center">vAPI is Vulnerable API OWAP Top 10 API (Github)</td>  
   </tr>  
  </table>



<H3 align="center"> Suggestions for courses Hacking: üï∏Ô∏è </H3>
>https://sec4us.com.br/treinamentos/web-api-exploitation/

<H3 align="center"> Suggestions for courses on Udemy, to help you understand the structure of some APIs. üëç </H3>
>https://www.udemy.com/course/automacao-de-testes-de-api-com-postman-projeto-de-testes/ <br>
https://www.udemy.com/course/aprenda-postman-em-1-hora-iniciante/ <br>
https://www.udemy.com/course/springboot-essencial/ <br>
https://www.udemy.com/course/crie-apis-rest-com-spring-boot-do-iniciante-ao-especialista/ <br>
https://www.udemy.com/course/webapi-entityframework-mysql/ <br>
https://www.udemy.com/course/graphql-criando-apis-profissionais-e-flexiveis/ <br>
https://www.udemy.com/course/microsservicos-java-spring-cloud/ <br>
https://www.udemy.com/course/curso-de-graphql-e-apollo-server-client/ <br>

<H3 align="center"> Seggestions for Books: üìö </H3>

<table border="1">    
     
  <tr>
    <td align="center">Author</td>
    <td align="center">Name</td>
    <td align="center">Description</td>
  </tr>
 
  <tr>
   <td >Corey J. Ball</td>
    <td><a href="https://www.amazon.com/Hacking-APIs-Application-Programming-Interfaces-ebook/dp/B09M82N4B4">Hacking APIs Application Programming Interfaces</a></td>
    <td>Hacking APIs is a crash course in web API security testing that will prepare you to penetration-test APIs, reap high rewards on bug bounty programs, and make your own APIs more secure.</td>
  </tr>
 
  <tr>
   <td> Vartul Goyal / Alexander Reay </td>
    <td><a href="https://www.amazon.com/API-Security-Hacking-Discover-implementation-ebook/dp/B0981YVRPG">API Security Hacking: Discover the dark secrets of API and learn secure implementation of APIs</a></td>
    <td>The book is based on test cases for OWASP top 10 attacks 2017 which includes the latest API vulnerabilities for most vulnerable applications</td>
  </tr>
 
  <tr>
    <td>Prabath Siriwardena</td>
    <td><a href="https://www.amazon.com/Advanced-API-Security-OAuth-Beyond-ebook-dp-B082WRYJJM/dp/B082WRYJJM/ref=mt_other?_encoding=UTF8&me=&qid=">Advanced API Security: OAuth 2.0 and Beyond</a></td>
    <td>Prepare for the next wave of challenges in enterprise security. Learn to better protect, monitor, and manage your public and private APIs. 
Enterprise APIs have become the common way of exposing business functions to the outside world.</td>
  </tr>
  <tr>
  <td>Neil Madden</td>
   <td><a href="https://www.manning.com/books/api-security-in-action">API Security in Action</td>
   <td>A web API is an efficient way to communicate with an application or service. However, this convenience opens your systems to new security risks.</td>
  </tr> 
</table>


<H3 align="center"> Level Two {Recon} ‚ÑπÔ∏è  </h2>
The first phase of a pentesting is the famous Recon "Information Collection" here is the moment where we must understand about the API infrastructure that we are analyzing.

Here I will provide a "API Mindmap" that will help you with some tools and methodologies in the API Recon phase, this mindmap was not created by me.

> https://dsopas.github.io/MindAPI/play/

<H3 align="center"> WordLists APIs and Endpoins: </H3>
 > https://github.com/TiagoSergio/How-to-Explore-APIs/blob/main/API_wordlist.txt <br>
 > https://github.com/danielmiessler/SecLists/tree/master/Discovery/Web-Content/api


During my study journey, I made a survey of the most found and exploited vulnerabilities when we talk about APIs:

- API Exposure
- Misconfigured Caching
- Exposed Tokens
- JWT Weaknesses
- Authorization Issues
- Undocumented Endpoints
- Different Versions
- Rate Limiting (BF Allowed)
- Race Conditions
- XXE Injection
- Switching Content Type
- HTTP Methods
- Injection Vulnerabilities

<H2 align="center">  Level three {Exploration} ‚ö†Ô∏è </H2>


<H3 align="center">  Inspect Baseline APIs: </h3>
>https://inspector.swagger.io/builder <br>
https://apitools.dev/swagger-parser/online/

### Convert version Open API:
>https://www.apimatic.io/transformer/



<H3 align="center"> API Security Checklist </h3>
<p align="center">Checklist of the most important security countermeasures when designing, testing, and releasing your API. <br>


<table border="1" align="center">    
  <tr>
    <td align="center"><h4>Name</td>
    <td align="center"><h4>Description</td>
  </tr>
  <tr>
    <td align="center"><h4>Authentication </td>
    <td> 
 ‚úîÔ∏è Don't use Basic Auth. Use standard authentication instead (e.g. JWT, OAuth). <br>
 ‚úîÔ∏è Don't reinvent the wheel in Authentication, token generation, password storage. Use the standards. <br>
 ‚úîÔ∏è Use Max Retry and jail features in Login. <br>
 ‚úîÔ∏è Use encryption on all sensitive data. <br>
    </td>
  </tr>
  <tr>
   <td align="center"><h4> JWT (JSON Web Token) </td>
   <td> 
 ‚úîÔ∏è Use a random complicated key (JWT Secret) to make brute forcing the token very hard. <br>
 ‚úîÔ∏è Don't extract the algorithm from the header. Force the algorithm in the backend (HS256 or RS256). <br>
 ‚úîÔ∏è Make token expiration (TTL, RTTL) as short as possible. <br>
 ‚úîÔ∏è Don't store sensitive data in the JWT payload, it can be decoded easily.
   </td>
  </tr>
  <tr>
   <td align="center"><h4>OAuth </td>
   <td> 
 ‚úîÔ∏è Always validate redirect_uri server-side to allow only whitelisted URLs. <br>
 ‚úîÔ∏è Always try to exchange for code and not tokens (don't allow response_type=token). <br>
 ‚úîÔ∏è Use state parameter with a random hash to prevent CSRF on the OAuth authentication process. <br>
 ‚úîÔ∏è Define the default scope, and validate scope parameters for each application. <br>
   </td>
  </tr>  
  <tr>
   <td align="center"><h4>Access  </td>
   <td> 
 ‚úîÔ∏è Limit requests (Throttling) to avoid DDoS / brute-force attacks. <br>
 ‚úîÔ∏è Use HTTPS on server side to avoid MITM (Man in the Middle Attack). <br>
 ‚úîÔ∏è Use HSTS header with SSL to avoid SSL Strip attack. <br>
 ‚úîÔ∏è For private APIs, only allow access from whitelisted IPs/hosts. <br>
   </td>
  </tr>  
  <tr>
   <td align="center"><h4> Input </td>
   <td> 
 ‚úîÔ∏è Use the proper HTTP method according to the operation: GET (read), POST (create), PUT/PATCH (replace/update), and DELETE (to delete a record), and respond with 405 Method Not Allowed if the requested method isn't appropriate for the requested resource.<br>
 ‚úîÔ∏è Validate content-type on request Accept header (Content Negotiation) to allow only your supported format (e.g. application/xml, application/json, etc.) and respond with 406 Not Acceptable response if not matched. <br>
 ‚úîÔ∏è Validate content-type of posted data as you accept (e.g. application/x-www-form-urlencoded, multipart/form-data, application/json, etc.). <br>
 ‚úîÔ∏è Validate user input to avoid common vulnerabilities (e.g. XSS, SQL-Injection, Remote Code Execution, etc.). <br>
 ‚úîÔ∏è Don't use any sensitive data (credentials, Passwords, security tokens, or API keys) in the URL, but use standard Authorization header. <br>
 ‚úîÔ∏è Use an API Gateway service to enable caching, Rate Limit policies (e.g. Quota, Spike Arrest, or Concurrent Rate Limit) and deploy APIs resources dynamically. 
    </td>
  </tr> 
  <tr>
   <td align="center"><h4> Processing </td>
   <td> 
 ‚úîÔ∏è Check if all the endpoints are protected behind authentication to avoid broken authentication process. <br>
 ‚úîÔ∏è User own resource ID should be avoided. Use /me/orders instead of /user/654321/orders. <br>
 ‚úîÔ∏è Don't auto-increment IDs. Use UUID instead. <br>
 ‚úîÔ∏è If you are parsing XML files, make sure entity parsing is not enabled to avoid XXE (XML external entity attack). <br>
 ‚úîÔ∏è If you are parsing XML files, make sure entity expansion is not enabled to avoid Billion Laughs/XML bomb via exponential entity expansion attack. <br>
 ‚úîÔ∏è Use a CDN for file uploads. <br>
 ‚úîÔ∏è If you are dealing with huge amount of data, use Workers and Queues to process as much as possible in background and return response fast to avoid HTTP Blocking. <br>
 ‚úîÔ∏è Do not forget to turn the DEBUG mode OFF.
    </td>
  </tr>
  <tr>
   <td align="center"><h4> Output </td>
   <td> 
 ‚úîÔ∏è Send X-Content-Type-Options: nosniff header. <br>
 ‚úîÔ∏è Send X-Frame-Options: deny header. <br>
 ‚úîÔ∏è Send Content-Security-Policy: default-src 'none' header. <br>
 ‚úîÔ∏è Remove fingerprinting headers - X-Powered-By, Server, X-AspNet-Version, etc. <br>
 ‚úîÔ∏è Force content-type for your response. If you return application/json, then your content-type response is application/json. <br>
 ‚úîÔ∏è Don't return sensitive data like credentials, Passwords, or security tokens. <br>
 ‚úîÔ∏è Return the proper status code according to the operation completed. (e.g. 200 OK, 400 Bad Request, 401 Unauthorized, 405 Method Not Allowed, etc.).
    </td>
  </tr>
  <tr>
   <td align="center"><h4> CI & CD </td>
   <td> 
 ‚úîÔ∏è Audit your design and implementation with unit/integration tests coverage. <br>
 ‚úîÔ∏è Use a code review process and disregard self-approval. <br>
 ‚úîÔ∏è Ensure that all components of your services are statically scanned by AV software before pushing to production, including vendor libraries and other dependencies.<br> 
 ‚úîÔ∏è Design a rollback solution for deployments. <br> 
   </td>
  </tr>
 </table> 
 
 <h6 align="center"> Font: https://github.com/shieldfy/API-Security-Checklist </h6>


### Tools:
>https://github.com/Fuzzapi/fuzzapi <br>
https://github.com/Fuzzapi/API-fuzzer <br>
https://github.com/flipkart-incubator/Astra <br>
https://github.com/BBVA/apicheck/ <br>
https://github.com/ngalongc/openapi_security_scanner <br>
https://github.com/assetnote/kiterunner <br>
https://github.com/s0md3v/dump/tree/master/json2paths <br>
https://github.com/imperva/automatic-api-attack-tool <br>
https://github.com/microsoft/restler-fuzzer <br>
https://github.com/RhinoSecurityLabs/Swagger-EZ <br>

### Tools GraphQL:
>https://github.com/dolevf/graphw00f <br>
https://github.com/nikitastupin/clairvoyance <br>
https://github.com/assetnote/batchql <br>
https://github.com/doyensec/inql <br>
https://github.com/swisskyrepo/GraphQLmap <br>
https://apis.guru/graphql-voyager/ <br>
https://gitlab.com/dee-see/graphql-path-enum <br>
https://github.com/andev-software/graphql-ide <br>



